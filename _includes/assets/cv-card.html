{%- assign item = include.link -%}
{%- assign has_url = item.url and item.url != '' -%}

{%- if has_url -%}
<a
  class="card rounded"
  data-aos="fade"
  href="{{ item.url }}"
  {% if item.external %}target="_blank" rel="noopener nofollow"{% endif %}
>
{%- else -%}
<div class="card rounded" data-aos="fade">
{%- endif -%}

  <div class="details">
    <div class="thumbnail thumbnail__small {% if item.icon %}icon{% endif %}">
      {% if item.icon %}
        <i class="far fa-{{ item.icon }}" aria-hidden="true"></i>
      {% elsif item.thumbnail %}
        <img src="{{ item.thumbnail }}" alt="{{ item.title | escape }}" loading="lazy" />
      {% else %}
        <i class="far fa-circle" aria-hidden="true"></i>
      {% endif %}
    </div>

    <div class="info">
      <p class="title m-0 mb-1">{{ item.title }}</p>

      {% if item.subtitle and item.subtitle != '' %}
        <p class="muted m-0">{{ item.subtitle }}</p>
      {% endif %}

      {% if item.description and item.description != '' %}
        <p class="muted m-0 mt-2">{{ item.description }}</p>
      {% endif %}

      {% if item.dates and item.dates != '' %}
        {% if item.location and item.location != '' %}
          <p class="muted m-0 mt-2">{{ item.dates }} Â· {{ item.location }}</p>
        {% else %}
          <p class="muted m-0 mt-2">{{ item.dates }}</p>
        {% endif %}
      {% else %}
        {% if item.location and item.location != '' %}
          <p class="muted m-0 mt-2">{{ item.location }}</p>
        {% endif %}
      {% endif %}

      {% if item.bullets %}
        <ul class="muted m-0 mt-3" style="padding-left: 1.2em;">
          {% for b in item.bullets %}
            <li>{{ b }}</li>
          {% endfor %}
        </ul>
      {% endif %}
    </div>
  </div>

  {% if has_url %}
  <div class="arrow">
    <span class="visually-hidden">Open {{ item.title }}</span>
    <i class="far fa-arrow-right {% if item.external %}external{% endif %}" aria-hidden="true"></i>
  </div>
  {% endif %}

{%- if has_url -%}
</a>
{%- else -%}
</div>
{%- endif -%}
